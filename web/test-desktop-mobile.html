<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desktop vs Mobile Mode Test</title>
  <link rel="stylesheet" href="./styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .test-container {
      margin: 20px;
      padding: 15px;
      border: 2px solid #ccc;
      border-radius: 8px;
    }
    .info-panel {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0,0,0,0.9);
      color: white;
      padding: 10px;
      font-size: 11px;
      border-radius: 5px;
      font-family: monospace;
      z-index: 9999;
      min-width: 200px;
    }
    .grid-test {
      overflow: auto;
      border: 1px solid #999;
      height: 200px;
      margin: 10px 0;
    }
    .mode-buttons {
      margin: 10px 0;
    }
    .mode-buttons button {
      margin: 5px;
      padding: 8px 12px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      border-radius: 4px;
    }
    .mode-buttons button.active {
      background: #007cba;
      color: white;
    }
  </style>
</head>
<body>
  <div class="info-panel" id="info-panel">
    <div>Window: <span id="window-size">-</span></div>
    <div>Body Classes: <span id="body-classes">-</span></div>
    <div>Cell Width: <span id="cell-width">-</span></div>
    <div>Expected: <span id="expected">-</span></div>
  </div>
  
  <div class="test-container">
    <h1>Desktop vs Mobile Mode Test</h1>
    
    <div class="mode-buttons">
      <button onclick="setDesktopMode()" id="btn-desktop">Desktop Mode (120px cells)</button>
      <button onclick="setMobileMode()" id="btn-mobile">Mobile Mode (60px cells)</button>
      <button onclick="setSmallMobileMode()" id="btn-small">Small Mobile (70px cells)</button>
      <button onclick="detectAuto()" id="btn-auto" class="active">Auto Detect</button>
    </div>
    
    <div>
      <strong>Current Mode:</strong> <span id="current-mode">Auto Detect</span>
    </div>
    
    <div class="grid-test">
      <div class="modern-spreadsheet">
        <div class="grid-header">
          <div class="corner-cell">C</div>
          <div class="col-header">A</div>
          <div class="col-header">B</div>
          <div class="col-header">C</div>
          <div class="col-header">D</div>
          <div class="col-header">E</div>
          <div class="col-header">F</div>
          <div class="col-header">G</div>
        </div>
        <div class="grid-body">
          <div class="grid-row">
            <div class="row-header">1</div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Desktop"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Should"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Be"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="120px"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Wide"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Cells"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Wide"></div>
          </div>
          <div class="grid-row">
            <div class="row-header">2</div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Mobile"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Should"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Be"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="60px"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Or"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="70px"></div>
            <div class="modern-cell"><input type="text" class="cell-input" value="Cells"></div>
          </div>
        </div>
      </div>
    </div>
    
    <div style="margin-top: 20px; padding: 10px; background: #f0f0f0;">
      <h3>Expected Behavior:</h3>
      <ul style="font-size: 14px; margin: 10px 0;">
        <li><strong>Desktop (>768px):</strong> 120px wide cells, 28px height</li>
        <li><strong>Mobile (≤768px):</strong> 60px wide cells, 44px height</li>
        <li><strong>Small Mobile (≤480px):</strong> 70px wide cells, 44px height</li>
      </ul>
      
      <p style="margin-top: 15px;"><strong>Test Instructions:</strong></p>
      <ol style="font-size: 14px;">
        <li>Use "Auto Detect" and resize browser window</li>
        <li>Force different modes with buttons</li>
        <li>Check that desktop mode uses 120px cells even on small screens</li>
        <li>Check that mobile modes use smaller cells even on large screens</li>
      </ol>
    </div>
  </div>
  
  <script>
    function updateInfo() {
      const windowSize = `${window.innerWidth}x${window.innerHeight}`;
      const bodyClasses = document.body.className || 'none';
      const firstCell = document.querySelector('.modern-cell');
      const cellWidth = firstCell ? window.getComputedStyle(firstCell).width : 'not found';
      
      let expected = '';
      if (window.innerWidth <= 480) {
        expected = '70px (small mobile)';
      } else if (window.innerWidth <= 768) {
        expected = '60px (mobile)';
      } else {
        expected = '120px (desktop)';
      }
      
      document.getElementById('window-size').textContent = windowSize;
      document.getElementById('body-classes').textContent = bodyClasses;
      document.getElementById('cell-width').textContent = cellWidth;
      document.getElementById('expected').textContent = expected;
    }
    
    function clearActiveButtons() {
      document.querySelectorAll('.mode-buttons button').forEach(btn => {
        btn.classList.remove('active');
      });
    }
    
    function setDesktopMode() {
      document.body.classList.remove('mobile-layout', 'small-mobile-layout');
      document.getElementById('current-mode').textContent = 'Desktop (Forced)';
      clearActiveButtons();
      document.getElementById('btn-desktop').classList.add('active');
      updateInfo();
    }
    
    function setMobileMode() {
      document.body.classList.remove('mobile-layout', 'small-mobile-layout');
      document.body.classList.add('mobile-layout');
      document.getElementById('current-mode').textContent = 'Mobile (Forced)';
      clearActiveButtons();
      document.getElementById('btn-mobile').classList.add('active');
      updateInfo();
    }
    
    function setSmallMobileMode() {
      document.body.classList.remove('mobile-layout', 'small-mobile-layout');
      document.body.classList.add('small-mobile-layout');
      document.getElementById('current-mode').textContent = 'Small Mobile (Forced)';
      clearActiveButtons();
      document.getElementById('btn-small').classList.add('active');
      updateInfo();
    }
    
    function detectAuto() {
      const isMobile = window.innerWidth <= 768;
      const isSmallMobile = window.innerWidth <= 480;
      
      document.body.classList.remove('mobile-layout', 'small-mobile-layout');
      
      if (isSmallMobile) {
        document.body.classList.add('small-mobile-layout');
        document.getElementById('current-mode').textContent = 'Small Mobile (Auto)';
      } else if (isMobile) {
        document.body.classList.add('mobile-layout');
        document.getElementById('current-mode').textContent = 'Mobile (Auto)';
      } else {
        document.getElementById('current-mode').textContent = 'Desktop (Auto)';
      }
      
      clearActiveButtons();
      document.getElementById('btn-auto').classList.add('active');
      updateInfo();
    }
    
    // Initialize
    detectAuto();
    setInterval(updateInfo, 1000);
    
    // Auto-detect on resize only if auto mode is active
    window.addEventListener('resize', () => {
      if (document.getElementById('btn-auto').classList.contains('active')) {
        detectAuto();
      }
    });
  </script>
</body>
</html>